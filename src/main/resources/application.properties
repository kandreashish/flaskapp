# Server Configuration
server.port=3000

# Gzip Compression Configuration
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css,image/svg+xml
server.compression.min-response-size=1024

# File Upload Configuration
spring.servlet.multipart.max-file-size=1MB
spring.servlet.multipart.max-request-size=1MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.resolve-lazily=false
spring.servlet.multipart.location=uploads/temp

# Firebase Storage Configuration
firebase.storage.bucket=${FIREBASE_STORAGE_BUCKET:}

# Database Configuration - Use environment variables for all database settings
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true

# H2 Console Configuration - Use environment variables
spring.h2.console.enabled=${SPRING_H2_CONSOLE_ENABLED:true}
spring.h2.console.path=${SPRING_H2_CONSOLE_PATH:/h2-console}
spring.h2.console.settings.web-allow-others=${SPRING_H2_CONSOLE_WEB_ALLOW_OTHERS:true}

# JWT Configuration - Use environment variables for security
jwt.secret=${JWT_SECRET:908e64c9a9559cebe72c70de99788f7193f6d758e09e64a2249cfaea155e3739}
jwt.expiration=${JWT_EXPIRATION:604800000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# Firebase Configuration - All loaded from environment variables with defaults
firebase.type=${FIREBASE_TYPE:service_account}
firebase.auth-uri=${FIREBASE_AUTH_URI:https://accounts.google.com/o/oauth2/auth}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true
management.health.db.enabled=true
management.endpoint.health.probes.enabled=true
# Optional custom health groups (example: core includes db & ping)
management.endpoint.health.group.core.include=db,ping

# Custom Health Checks
custom.health.min-disk-free-mb=${HEALTH_MIN_DISK_FREE_MB:100}

# Logging Configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Set appropriate log levels using environment variables
logging.level.com.lavish.expensetracker.controller=${LOGGING_LEVEL_CONTROLLER:DEBUG}
logging.level.com.lavish.expensetracker.service=${LOGGING_LEVEL_SERVICE:DEBUG}
logging.level.root=${LOGGING_LEVEL_ROOT:INFO}
logging.level.org.springframework.web=${LOGGING_LEVEL_SPRING_WEB:INFO}

# File logging configuration
logging.file.name=${LOGGING_FILE_NAME:logs/expense-tracker.log}
logging.file.max-size=${LOGGING_FILE_MAX_SIZE:10MB}
logging.file.max-history=${LOGGING_FILE_MAX_HISTORY:10}

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.displayRequestDuration=true
springdoc.swagger-ui.defaultModelsExpandDepth=1
springdoc.swagger-ui.defaultModelExpandDepth=1
springdoc.swagger-ui.displayOperationId=false
springdoc.swagger-ui.showExtensions=true
springdoc.swagger-ui.showCommonExtensions=true

# Group API documentation by packages
springdoc.group-configs[0].group=family-management
springdoc.group-configs[0].paths-to-match=/api/family/**
springdoc.group-configs[0].display-name=Family Management API

springdoc.group-configs[1].group=authentication
springdoc.group-configs[1].paths-to-match=/api/auth/**
springdoc.group-configs[1].display-name=Authentication API

springdoc.group-configs[2].group=expenses
springdoc.group-configs[2].paths-to-match=/api/expenses/**
springdoc.group-configs[2].display-name=Expense Management API

springdoc.group-configs[3].group=notifications
springdoc.group-configs[3].paths-to-match=/api/notifications/**
springdoc.group-configs[3].display-name=Notification API
